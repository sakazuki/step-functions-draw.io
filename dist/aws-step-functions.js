!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){var n=r(1);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var a={insert:"head",singleton:!1};r(3)(n,a);n.locals&&(t.exports=n.locals)},function(t,e,r){(e=r(2)(!1)).push([t.i,"/* dark styling of the editor */\r\ndiv.jsoneditor,\r\ndiv.jsoneditor-menu {\r\n  border-color: #9c9c9c;\r\n}\r\ndiv.jsoneditor-menu {\r\n  background-color: #9c9c9c;\r\n}\r\n\r\n/* coloring of modal */\r\ndiv.jsoneditor-modal .pico-modal-header {\r\n  background-color: #9c9c9c;\r\n}\r\ndiv.jsoneditor-modal .jsoneditor-jmespath-label {\r\n  color: black;\r\n}\r\ndiv.jsoneditor-modal .jsoneditor-button-group.jsoneditor-button-group-value-asc input.jsoneditor-button-asc,\r\ndiv.jsoneditor-modal .jsoneditor-button-group.jsoneditor-button-group-value-desc input.jsoneditor-button-desc{\r\n  background-color: #357ae8;\r\n  background-image: linear-gradient(#4d90fe 0px,#357ae8 100%);\r\n  border: 1px solid #2f5bb7;\r\n  color: #fff;\r\n}",""]),t.exports=e},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var a=(i=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),o=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot).concat(t," */")}));return[r].concat(o).concat([a]).join("\n")}var i,s,u;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n=0;n<t.length;n++){var a=[].concat(t[n]);r&&(a[2]?a[2]="".concat(r," and ").concat(a[2]):a[2]=r),e.push(a)}},e}},function(t,e,r){"use strict";var n,a={},o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}();function s(t,e){for(var r=[],n={},a=0;a<t.length;a++){var o=t[a],i=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(s):r.push(n[i]={id:i,parts:[s]})}return r}function u(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=a[n.id],i=0;if(o){for(o.refs++;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(f(n.parts[i],e))}else{for(var s=[];i<n.parts.length;i++)s.push(f(n.parts[i],e));a[n.id]={id:n.id,refs:1,parts:s}}}}function l(t){var e=document.createElement("style");if(void 0===t.attributes.nonce){var n=r.nc;n&&(t.attributes.nonce=n)}if(Object.keys(t.attributes).forEach((function(r){e.setAttribute(r,t.attributes[r])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,p=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function d(t,e,r,n){var a=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=p(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function h(t,e,r){var n=r.css,a=r.media,o=r.sourceMap;if(a&&t.setAttribute("media",a),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var m=null,g=0;function f(t,e){var r,n,a;if(e.singleton){var o=g++;r=m||(m=l(e)),n=d.bind(null,r,o,!1),a=d.bind(null,r,o,!0)}else r=l(e),n=h.bind(null,r,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).attributes="object"==typeof e.attributes?e.attributes:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=o());var r=s(t,e);return u(r,e),function(t){for(var n=[],o=0;o<r.length;o++){var i=r[o],l=a[i.id];l&&(l.refs--,n.push(l))}t&&u(s(t,e),e);for(var c=0;c<n.length;c++){var p=n[c];if(0===p.refs){for(var d=0;d<p.parts.length;d++)p.parts[d]();delete a[p.id]}}}}},function(t,e,r){"use strict";let n;function a(t,e){return t&&t.value&&t.value.getAttribute("type")==`awssf${e}`}function o(t){return t&&null!=t.awssf&&t.value&&t.value.getAttribute("type")&&0==t.value.getAttribute("type").indexOf("awssf")}function i(t){return a(t,"AWSconfig")}function s(t){return a(t,"Start")}function u(t){return a(t,"End")}function l(t){return t&&t.parent&&t.parent.awssf&&a(t.parent,"Parallel")}function c(t){return t&&t.parent&&t.parent.awssf&&a(t.parent,"Map")}function p(t){return a(t,"Parralel")}function d(t){return a(t,"Map")}function h(t){return a(t,"Task")}function m(t){return a(t,"Next")}function g(t){return a(t,"StartAt")}function f(t){return a(t,"Retry")}function A(t){return a(t,"Catch")}function b(t){return a(t,"Choice")}function y(t){return a(t,"Default")}function v(t,e){var r=mxUtils.createImage(e);return r.setAttribute("title",t.prototype.type),r.style.cursor="pointer",r.style.width="16px",r.style.height="16px",mxEvent.addGestureListeners(r,mxUtils.bind(this,(function(e){var r=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),n=t.prototype.create();this.graph.connectionHandler.start(this.state,r.x,r.y,new mxCellState(this.graph.view,n,this.graph.getCellStyle(n))),this.graph.isMouseDown=!0,this.graph.isMouseTrigger=mxEvent.isMouseEvent(e),mxEvent.consume(e)}))),r}function x(t){return t?!!t.match(/^\d+$/):null}function w(t){if(!t)return null;try{return JSON.parse(t),!0}catch(t){return!1}}function S(t){return t?!(!t.match(/^\$/)||t.match(/([@,:?[\]]|\.\.)/))||"null"==t:null}function E(t,e,r){return e||(e=[]),0==S(t.getAttribute("input_path"))&&e.push("input_path MUST use only supported jsonpath"),0==S(t.getAttribute("output_path"))&&e.push("output_path MUST use only supported jsonpath"),r&&0==S(t.getAttribute("result_path"))&&e.push("result_path MUST use only supported jsonpath or null"),e}function C(t){return(t=function(t){return(t=t.charAt(0).toLowerCase()+t.slice(1)).replace(/_./g,(function(t){return t.charAt(1).toUpperCase()}))}(t)).replace(/([A-Z])/g,(function(t){return"_"+t.charAt(0).toLowerCase()}))}var N;function T(t,e){if(null==e&&(e={}),"&&"==t.operator)Object.assign(e,{And:[T(t.left),T(t.right)]});else if("||"==t.operator)Object.assign(e,{Or:[T(t.left),T(t.right)]});else if("!"==t.operator)Object.assign(e,{Not:T(t.argument)});else if(N[t.operator]){var r,n=function t(e,r){return null==r&&(r=[]),"MemberExpression"==e.type?(e.computed?r.unshift("["+t(e.property)+"]"):r.unshift(t(e.property)),t(e.object,r)):"Identifier"==e.type?(r.unshift(e.name),r.reduce((t,e)=>"["==e[0]?t+e:t+"."+e)):"Literal"==e.type?e.value:void 0}(t.left),a=function(t){return t.value}(t.right);"number"==typeof a?r="Numeric":"string"==typeof a?r=a.match(/^["'][\d-]+T[\d:]+Z["']$/)?"Timestamp":"String":"boolean"==typeof a&&(r="Boolean");var o={Variable:n};o[r+N[t.operator]]=a,Object.assign(e,o)}return e}function M(t){return"null"===t?null:t}function U(){return"undefined"!=typeof __updateAWSconfig&&"undefined"!=typeof __describeStateMachine&&"undefined"!=typeof __listStateMachines&&"undefined"!=typeof __deployStateMachine}function R(){return U()}function O(){var t={},e=n.editor.graph.getModel(),r=null;for(var a in e.cells){var p=e.cells[a];o(p)&&(i(p)||l(p)||c(p)||(g(p)&&(r=e.cells[p.target.id].getAttribute("label")),s(p)||u(p)||p.isVertex()&&Object.assign(t,p.awssf.expJSON(p,e.cells))))}var d=e.getRoot(),h={};return d.getAttribute("comment")&&(h.Comment=d.getAttribute("comment")),r&&(h.StartAt=r),h.States=t,d.getAttribute("timeout_seconds")&&(h.TimeoutSeconds=Number(d.getAttribute("timeout_seconds"))),d.getAttribute("version")&&(h.Version=d.getAttribute("version")),h}function D(){var t=new mxCodec,e=n.editor.graph.getModel(),r=t.encode(e),a=mxUtils.findNode(r,"type","awssfAWSconfig");if(null==a)return!1;var o=t.decode(a),i={accessKeyId:o.getAttribute("accessKeyId"),secretAccessKey:o.getAttribute("secretAccessKey"),region:o.getAttribute("region")};return AWS.config.update(i),"undefined"!=typeof __updateAWSconfig&&__updateAWSconfig(i),!0}function P(t){if(D()){var e=[];new AWS.Lambda({apiVersion:"2015-03-31"}).listFunctions({},(function(r,n){if(r)console.log(r,r.stack);else{for(var a in n.Functions){var o=n.Functions[a];e.push(o.FunctionArn)}t(e)}}))}}r.r(e),function(t){t["=="]="Equals",t["<"]="LessThan",t[">"]="GreaterThan",t["<="]="LessThanEquals",t[">="]="GreaterThanEquals"}(N||(N={}));const _=function(t,e){const r=t.editor.graph;function n(t){var e;e="{"===t[0]?JSON.parse(t.trim()):jsyaml.load(t.trim());var n=r.getModel().getRoot();n.setAttribute("comment",e.Comment||""),n.setAttribute("timeout_seconds",e.TimeoutSeconds||""),n.setAttribute("version",e.Version||"");var a=function t(e){const r={hash:{},list:[]};let n;for(const a in e){const o=e[a];if("Pass"===o.Type)n=PassState.prototype.create(a,o);else if("Task"===o.Type)n=TaskState.prototype.create(a,o);else if("Choice"===o.Type)n=ChoiceState.prototype.create(a,o);else if("Wait"===o.Type)n=WaitState.prototype.create(a,o);else if("Succeed"===o.Type)n=SucceedState.prototype.create(a,o);else if("Fail"===o.Type)n=FailState.prototype.create(a,o);else if("Parallel"===o.Type){n=ParallelState.prototype.create(a,o);for(const e in o.Branches){const a=t(o.Branches[e].States);for(const t of a.list)n.insert(t);Object.assign(r.hash,a.hash)}}else if("Map"===o.Type){n=MapState.prototype.create(a,o);const e=t(o.Iterator.States);for(const t of e.list)n.insert(t);Object.assign(r.hash,e.hash)}r.hash[a]=n,r.list.push(n)}return r}(e.States),o=a.list,i=a.hash,s=StartPoint.prototype.create();o.unshift(s);var u=EndPoint.prototype.create();o.push(u);var l=function t(e,r,n,a){var o,i=[];for(var s in e.StartAt&&n&&((o=StartAtEdge.prototype.create()).source=n,o.target=r[e.StartAt],i.push(o)),e.States){var u=e.States[s];if(u.Default&&r[u.Default]&&(o=DefaultEdge.prototype.create("Default",r[s],r[u.Default]),i.push(o)),u.Next&&r[u.Next]&&(o=NextEdge.prototype.create("Next",r[s],r[u.Next]),i.push(o)),(u.End||u.Type&&u.Type.match(/(Succeed|Fail)/))&&a&&(o=NextEdge.prototype.create("Next",r[s],a),i.push(o)),u.Retry)for(const t in u.Retry)o=RetryEdge.prototype.create("Retry",r[s],u.Retry[t],u.Retry.length-Number(t)),i.push(o);if(u.Catch&&u.Catch.length>0)for(const t in u.Catch)o=CatchEdge.prototype.create("Catch",r[s],r[u.Catch[t].Next],u.Catch[t],u.Catch.length-Number(t)),i.push(o);if(u.Choices&&u.Choices.length>0)for(const t in u.Choices)o=ChoiceEdge.prototype.create("Choice",r[s],r[u.Choices[t].Next],u.Choices[t],u.Choices.length-Number(t)),i.push(o);if("Parallel"===u.Type)for(const e of u.Branches){const n=r[s].getChildAt(0);t(e,r,n).map(t=>r[s].insert(t))}if("Map"===u.Type){const e=r[s].getChildAt(0);t(u.Iterator,r,e).map(t=>r[s].insert(t))}}return i}(e,i,s,u);o.push(...l),r.getModel().beginUpdate();try{r.addCells(o),r.fireEvent(new mxEventObject("cellsInserted","cells",o))}finally{r.getModel().endUpdate()}return o}var a=document.createElement("div"),o=document.createElement("h2");mxUtils.write(o,e),o.style.marginTop="0px",o.style.marginBottom="24px",a.appendChild(o);var i=document.createElement("span");mxUtils.write(i,"Paste statemachine definition JSON or YAML"),a.appendChild(i);var s=new mxForm("properties");s.table.style.width="100%",s.table.style.paddingRight="20px";var u="",l=s.addTextarea("",u,25);l.style.width="100%",l.style.marginBottom="16px",a.appendChild(s.table);var c=new mxForm("properties");c.table.style.width="100%",c.table.style.paddingRight="20px";var p=document.createElement("colgroup");p.width="120",c.table.insertBefore(p,c.body);var d=document.createElement("colgroup");c.table.insertBefore(d,c.body);var h=document.createElement("select");if(c.addField("StateMachine:",h),U()&&D())__listStateMachines().then((function(t){for(var e in t.stateMachines){var r=document.createElement("option");mxUtils.writeln(r,t.stateMachines[e].name),r.setAttribute("value",t.stateMachines[e].stateMachineArn),h.appendChild(r)}})),mxEvent.addListener(h,"change",(function(){__describeStateMachine(h.value).then((function(t){0!=l.value.length&&l.value!=u||(u=t.definition,l.value=u)}))}));else{var m=document.createElement("option");mxUtils.writeln(m,"Select a StateMachine..."),h.appendChild(m),h.disabled=!0}a.appendChild(c.table);var g=document.createElement("div");g.style.marginTop="18px",g.style.textAlign="right",this.init=function(){l.focus()};var f=mxUtils.button(mxResources.get("cancel"),(function(){l.value==u?t.hideDialog():t.confirm(mxResources.get("areYouSure"),(function(){t.hideDialog()}))}));f.className="geBtn",t.editor.cancelFirst&&g.appendChild(f);var A=mxUtils.button(mxResources.get("awssfImportBtn"),(function(){try{var e=n(l.value);t.hideDialog(),function(t){r.setSelectionCells(t),r.getModel().beginUpdate();try{var e=t.filter((function(t){return t.awssf.type.match(/Parallel|Map/)})),n=new mxCompactTreeLayout(r,!1);for(var a in n.edgeRouting=!1,n.levelDistance=30,n.groupPadding=30,e)n.execute(e[a],e[a].getChildAt(0));var o=new mxHierarchicalLayout(r,mxConstants.DIRECTION_NORTH);o.intraCellSpacing=40,o.interRankCellSpacing=40,o.interHierarchySpacing=40,o.parallelEdgeSpacing=10,o.execute(r.getDefaultParent(),[t[0]])}finally{var i=new mxMorphing(r);i.addListener(mxEvent.DONE,mxUtils.bind(this,(function(){r.getModel().endUpdate()}))),i.startAnimation()}}(e)}catch(t){alert(t)}}));g.appendChild(A),A.className="geBtn gePrimaryBtn",t.editor.cancelFirst||g.appendChild(f),a.appendChild(g),this.container=a},k=function(t,e){var r=t.editor.graph,n={definition:JSON.stringify(O(),null,"  "),name:r.getModel().cells[0].getAttribute("name")||"",roleArn:r.getModel().cells[0].getAttribute("role_arn")||"",stateMachineArn:r.getModel().cells[0].getAttribute("state_machine_arn")||""},a=document.createElement("div"),o=document.createElement("h2");mxUtils.write(o,e),o.style.marginTop="0px",o.style.marginBottom="24px",a.appendChild(o);var i=new mxForm("properties");i.table.style.width="100%",i.table.style.paddingRight="20px";var s=document.createElement("colgroup");s.width="120",i.table.insertBefore(s,i.body);var u=document.createElement("colgroup");i.table.insertBefore(u,i.body);var l=document.createElement("select"),c=document.createElement("option");mxUtils.writeln(c,"Create a new statemachine"),c.setAttribute("selected","true"),l.appendChild(c),c.setAttribute("value","__CREATE__"),__listStateMachines().then((function(t){for(var e in t.stateMachines){var r=document.createElement("option");mxUtils.writeln(r,t.stateMachines[e].name),r.setAttribute("value",t.stateMachines[e].stateMachineArn),n.stateMachineArn==t.stateMachines[e].stateMachineArn&&r.setAttribute("selected","true"),l.appendChild(r)}})),i.addField("StateMachine:",l),mxEvent.addListener(l,"change",(function(){__describeStateMachine(l.value).then((function(t){0!=g.value.length&&g.value!=m||(p.value=t.stateMachineArn,d.value=t.name,h.value=t.roleArn)}))}));var p=i.addText("StaeMachineArn:",n.stateMachineArn);p.style.width="100%";var d=i.addText("Name:",n.name);d.style.width="100%";var h=i.addText("Role:",n.roleArn);h.style.width="100%";var m=n.definition,g=i.addTextarea("Definition:",m,30);g.style.width="100%",a.appendChild(i.table);var f=document.createElement("div");f.style.marginTop="18px",f.style.textAlign="right",this.init=function(){d.focus()};var A=mxUtils.button(mxResources.get("cancel"),(function(){g.value==m?t.hideDialog():t.confirm(mxResources.get("areYouSure"),(function(){t.hideDialog()}))}));A.className="geBtn",t.editor.cancelFirst&&f.appendChild(A);var b=mxUtils.button(mxResources.get("awssfDeployBtn"),(function(){var e={name:d.value,definition:g.value,roleArn:h.value};"__CREATE__"!==l.value&&(e.stateMachineArn=p.value,delete e.name,e.roleArn||delete e.roleArn,e.definition||delete e.definition),__deployStateMachine(e).then(()=>{t.hideDialog()}).catch(t=>{alert(t.message)})}));f.appendChild(b),b.className="geBtn gePrimaryBtn",t.editor.cancelFirst||f.appendChild(A),a.appendChild(f),this.container=a},B=function(t,e,r){var n=document.createElement("div"),a=document.createElement("h2");mxUtils.write(a,e),a.style.marginTop="0px",a.style.marginBottom="24px",n.appendChild(a);var o=new mxForm("properties");o.table.style.width="100%",o.table.style.paddingRight="20px";var i=o.addTextarea("",r,25);i.style.width="100%",i.style.marginBottom="16px",i.readOnly=!0,n.appendChild(o.table);var s=document.createElement("div");s.style.marginTop="18px",s.style.textAlign="right",this.init=function(){i.focus(),i.scrollTop=0};var u=mxUtils.button(mxResources.get("copy"),(function(){const t=document.createRange();t.selectNode(i);const e=document.getSelection();e.removeAllRanges(),e.addRange(t),document.execCommand("copy"),t.detach()}));u.className="geBtn gePrimaryBtn",s.appendChild(u);var l=mxUtils.button(mxResources.get("close"),(function(){t.hideDialog()}));l.className="geBtn",s.appendChild(l),n.appendChild(s),this.container=n};let I;function j(){var t=I.editor.graph.getSelectionCell()||I.editor.graph.getModel().getRoot();if(null!=t){var e=new EditDataDialog(I,t);I.showDialog(e.container,600,320,!0,!1),e.container.parentNode.style.resize="both",e.init()}}function J(t,e){var r=new B(I,t,e);I.showDialog(r.container,700,500,!0,!1),r.container.parentNode.style.resize="both",r.init()}function H(){var t={START_EXIST:[!1,"start MUST exist"],END_EXIST:[!1,"end MUST exist"],UNIQ_NAME:[!0,{},"name MUST be unique."],NAME_LENGTH:[!0,[],"name MUST BE less than or equal to 128 unicode characters."]},e=I.editor.graph.getModel();for(const a in e.cells){const o=e.cells[a];if(o.awssf&&o.awssf.validate){var r=o.awssf.validate(o);r.length>0?(t[n]=[!1,[],r.join("\n")],I.editor.graph.setCellWarning(o,r.join("\n"))):I.editor.graph.setCellWarning(o,null)}if(o.isVertex()){var n=o.getAttribute("label");null==n||s(o)||u(o)||(t.UNIQ_NAME[1][n]>=1?(t.UNIQ_NAME[0]=!1,t.UNIQ_NAME[1][n]+=1):t.UNIQ_NAME[1][n]=1,n.length>128&&(t.NAME_LENGTH[0]=!1,t.NAME_LENGTH[1].push(n))),null!=o.value&&(s(o)&&(t.START_EXIST[0]=!0),u(o)&&(t.END_EXIST[0]=!0))}}var a=[];for(const e in t)0==t[e][0]&&a.push(t[e][t[e].length-1]);a.length>0&&mxUtils.alert(a.join("\n"))}function L(){var t=O();J("Export as JSON",JSON.stringify(t,null,"  "))}function F(){var t=O();J("Export as YAML",jsyaml.dump(t))}function W(){var t=(new mxCodec).encode(I.editor.graph.getModel());J("Export as XML for draw.io",mxUtils.getPrettyXml(t))}function V(){var t=new _(I,"Import Definition");I.showDialog(t.container,700,500,!0,!1),t.container.parentNode.style.resize="both",t.init()}function Y(){if(U()&&D()){var t=new k(I,"Deploy StateMachine Definition");I.showDialog(t.container,800,600,!0,!1),t.container.parentNode.style.resize="both",t.init()}}const q=mxGraph.prototype.createEdge;mxGraph.prototype.createEdge=function(t,e,r,n,a,i){return o(n)&&n.awssf.createDefaultEdge?n.awssf.createDefaultEdge(n):q.apply(this,arguments)};const G=mxConnectionHandler.prototype.createEdgeState;mxConnectionHandler.prototype.createEdgeState=function(t){var e=this.previous.cell;if(o(e)&&e.awssf.createDefaultEdge){var r=e.awssf.createDefaultEdge(e);return r?new mxCellState(this.graph.view,r,this.graph.getCellStyle(r)):null}return G.apply(this,arguments)};const X=mxConnectionHandler.prototype.insertEdge;function z(t){const e=t.editor.graph.getModel().cellAdded;t.editor.graph.getModel().cellAdded=function(t){if(!o(t))return e.apply(this,arguments);var r={};for(const t in this.cells){const e=this.cells[t];if(e.isVertex()&&e.getAttribute("label")){var a=e.getAttribute("label");r[a]?r[a].push(e):r[a]=[e]}}var i=t.getAttribute("label");if(t.isVertex()&&r[i]&&!s(t)&&!u(t)){for(var l=2,c=i.replace(/(\d*)$/,l);r[c];)l++,c=i.replace(/(\d*)$/,l);t.setAttribute("label",c)}return function(){if(n.editor.graph.getModel().cells){var t=n.editor.graph.getModel().getRoot();t&&null==t.value&&(t.value=mxUtils.createXmlDocument().createElement("object"),null==t.getAttribute("type")&&t.setAttribute("type","awssfRoot"),null==t.getAttribute("name")&&t.setAttribute("name",""),null==t.getAttribute("comment")&&t.setAttribute("comment",""),null==t.getAttribute("timeout_seconds")&&t.setAttribute("timeout_seconds",""),null==t.getAttribute("version")&&t.setAttribute("version",""),null==t.getAttribute("role_arn")&&t.setAttribute("role_arn",""),null==t.getAttribute("state_machine_arn")&&t.setAttribute("state_machine_arn",""),t.awssf={})}}(),e.apply(this,arguments)}}function K(t){!function(t){const e=t.editor.graph.createHandler;t.editor.graph.createHandler=function(t){return null!=t&&1==this.getSelectionCells().length&&o(t.cell)&&t.cell.awssf.handler?new t.cell.awssf.handler(t):e.apply(this,arguments)}}(t),z(t)}var Z;function Q(t){var e=new mxObjectCodec(new t);e.encode=function(e,r){try{var n=e.document.createElement(t.name)}catch(t){console.log("encode error",t)}return n},e.decode=function(e,r,n){return new t},mxCodecRegistry.register(e)}function $(){var t=mxUtils.createImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACpklEQVRIS7VVMU9TURg9nWiZoF0k1MQmlKCREhhowUHaScpWdYHoINUORoKTiT+AhMnE6IDigraL2g10amGhxaFGMJHQJiWxBJcWJl6Zas4H9/leH4VKwl2a13vv+c73nfN911ar1Wq4oGVrBpzxq9VDnYLd3gKbzXYmpabAs2s5bBWKCAwOIPstJ7/dXs/5wNMrGfh6e+BytgvA4pcU3J0d6PNdRWp5FZpWxdhoSPbKlT2sb2wieHPIEszC/H08iQNNQ6m0i1DwBhwOu4BPP3kgwUo7u+CZ4MiwBMlkc3C52tDqcODeRMQUwAROVvlCEbHohFz8mFyUw2SpsuA3A/AsAblHAnPzcXi7PAiNDOsBTOBMce5tAk+nJuWCceUL2/qnt+uKaY9EXrx8h9jDcRMJS1nIqFLZx51IWAB+rP+SsjB11p2sy+V9YUwNuD4ll+B0tplY838LuHLG/YnbOnA9I5WhCrAQ/4zuLg8C/gFrzenjjZ+bKO38QWYtp4s3M/vakqq6rQI8f/ZYHPNmPoE+3zW4Oy+h93qP9IEwV+Ixutfrkbpt5YtIr6yKuI0W60z29DwD5PNF6Ye7kTHRTAf/Xdo1NQbB6Rzl55MCUAs6xNhQvHfZ3WEGpyhkTSecm3lhW9jTDDpz1pxdRifQHUrA/6k5LUz30FHsbr3mxpTr3bL0NYVHUbN/lYDhW0d2PNUtRvDGPm+XWlKbcnnP5POmwE/rUAqlVv1EpNtmZl9hemqycYcezZZtxKLjMlsoMld4NGiZLenljIj2b7YkxAwNZwuBmKKmHUrqAX8/WtVUPGZF0Rc+JBEaGcKBVkV27TtcrnY4HC1gVxvXiY8FM6BQzcxzBmPJjIxVgKZfIpaLs4Nu8g/2n/8lqu/GC31DGw6XMzb+An4I4cvYKbPGAAAAAElFTkSuQmCC");return t.setAttribute("title","Settings"),t.style.cursor="pointer",t.style.width="16px",t.style.height="16px",t}mxConnectionHandler.prototype.insertEdge=function(t,e,r,n,a,i){var s=null;if(!o(n))return X.apply(this,arguments);if((l(n)||l(a))&&n.parent!=a.parent)return null;if((c(n)||c(a))&&n.parent!=a.parent)return null;if(n==a&&(h(n)||p(n)||d(n)))s=RetryEdge.prototype.create();else if(this.edgeState)s=this.edgeState.cell;else{if(!n.awssf||!n.awssf.createDefaultEdge)return null;s=n.awssf.createDefaultEdge(n)}return null!=s?s=this.graph.addEdge(s,t,n,a):null};const tt=function(t){mxVertexHandler.apply(this,arguments)};(tt.prototype=new mxVertexHandler).constructor=tt,tt.prototype.domNode=null,tt.prototype.init=function(){mxVertexHandler.prototype.init.apply(this,arguments),this.domNode=document.createElement("div"),this.domNode.style.position="absolute",this.domNode.style.whiteSpace="nowrap",this.custom&&this.custom.apply(this,arguments);var t=$();mxEvent.addGestureListeners(t,mxUtils.bind(this,(function(t){mxEvent.consume(t)}))),mxEvent.addListener(t,"click",mxUtils.bind(this,(function(t){Z.actions.get("editData").funct(),mxEvent.consume(t)}))),this.domNode.appendChild(t),this.graph.container.appendChild(this.domNode),this.redrawTools()},tt.prototype.redraw=function(){mxVertexHandler.prototype.redraw.apply(this),this.redrawTools()},tt.prototype.redrawTools=function(){if(null!=this.state&&null!=this.domNode){var t=mxClient.IS_VML&&"CSS1Compat"==document.compatMode?20:4;this.domNode.style.left=this.state.x+this.state.width-14*this.domNode.children.length+"px",this.domNode.style.top=this.state.y+this.state.height+t+"px"}},tt.prototype.destroy=function(t,e){mxVertexHandler.prototype.destroy.apply(this,arguments),null!=this.domNode&&(this.domNode.parentNode.removeChild(this.domNode),this.domNode=null)};const et=function(t){mxEdgeHandler.apply(this,arguments)};function rt(t,e,r,n){var a=e||t.type;r||(r="rounded=1;whiteSpace=wrap;html=1;gradientColor=none;dashed=1"),n||(n={});var o=new mxGeometry(0,0,80,40),i=new mxCell(a,o,r);return i.vertex=!0,i.value=mxUtils.createXmlDocument().createElement("object"),i.setAttribute("label",a),i.setAttribute("type","awssf"+t.type),i.setAttribute("comment",n.Comment||""),t.type.match(/Fail/)||(i.setAttribute("input_path",n.InputPath||""),i.setAttribute("output_path",n.OutputPath||"")),t.type.match(/Pass|Task|Parallel|Map/)&&(i.setAttribute("parameters",JSON.stringify(n.Parameters)||""),i.setAttribute("result_path",n.ResultPath||"")),i.awssf=t,i}function nt(t,e){var r=t.type;null==e&&(e=new mxGeometry(0,0,40,40));var n=new mxCell(r,e,"ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;");return n.vertex=!0,n.value=mxUtils.createXmlDocument().createElement("object"),n.setAttribute("label",r),n.setAttribute("type","awssf"+r),n.awssf=t,n}function at(t,e,r,n,a,o){var i=new mxCell(e,new mxGeometry(0,0,60,60),r);return i.geometry.setTerminalPoint(new mxPoint(0,0),!0),i.geometry.setTerminalPoint(new mxPoint(i.geometry.width,i.geometry.height),!1),i.geometry.relative=!0,i.edge=!0,i.value=mxUtils.createXmlDocument().createElement("object"),i.setAttribute("label",e),i.setAttribute("type","awssf"+t.type),i.awssf=t,n&&a&&(i.source=n,i.target=a),i}(et.prototype=new mxEdgeHandler).constructor=et,et.prototype.domNode=null,et.prototype.init=function(){mxEdgeHandler.prototype.init.apply(this,arguments),this.domNode=document.createElement("div"),this.domNode.style.position="absolute",this.domNode.style.whiteSpace="nowrap",this.custom&&this.custom.apply(this,arguments);var t=$();mxEvent.addGestureListeners(t,mxUtils.bind(this,(function(t){mxEvent.consume(t)}))),mxEvent.addListener(t,"click",mxUtils.bind(this,(function(t){Z.actions.get("editData").funct(),mxEvent.consume(t)}))),this.domNode.appendChild(t),this.graph.container.appendChild(this.domNode),this.redrawTools()},et.prototype.redraw=function(){mxEdgeHandler.prototype.redraw.apply(this),this.redrawTools()},et.prototype.redrawTools=function(){if(null!=this.state&&null!=this.domNode){mxClient.IS_VML&&document.compatMode;this.domNode.style.left=this.labelShape.bounds.x+this.labelShape.bounds.width+"px",this.domNode.style.top=this.labelShape.bounds.y+"px"}},et.prototype.destroy=function(t,e){mxEdgeHandler.prototype.destroy.apply(this,arguments),null!=this.domNode&&(this.domNode.parentNode.removeChild(this.domNode),this.domNode=null)};const ot=function(){};ot.prototype=new mxSwimlane,ot.prototype.constructor=ot,ot.prototype.isHorizontal=function(){return!1},ot.prototype.paintVertexShape=function(t,e,r,n,a){t.translate(e,r);var o=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dx",this.dx))));o=Math.min(.5*n,.5*a,o),t.begin(),t.moveTo(n-.5*o,o),t.lineTo(n,o),t.lineTo(n,a),t.lineTo(o,a),t.lineTo(o,a-.5*o),t.lineTo(n-.5*o,a-.5*o),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(n-o,.5*o),t.lineTo(n-.5*o,.5*o),t.lineTo(n-.5*o,a-.5*o),t.lineTo(.5*o,a-.5*o),t.lineTo(.5*o,a-o),t.lineTo(n-o,a-o),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(0,0),t.lineTo(n-o,0),t.lineTo(n-o,a-o),t.lineTo(0,a-o),t.close(),t.stroke(),t.begin(),t.moveTo(0,this.startSize),t.lineTo(n-o,this.startSize),t.stroke()},mxCellRenderer.registerShape("awssf.layered",ot),Graph.handleFactory["awssf.layered"]=function(t){var e=[];return e.push(...Graph.handleFactory.swimlane(t)),e};const it=function(){};it.prototype.create=function(){return t=this,(e=new mxCell("AWSconfig",new mxGeometry(0,0,70,46),"dashed=0;html=1;shape=mxgraph.aws2.non-service_specific.cloud;strokeColor=none;verticalLabelPosition=bottom;verticalAlign=top;")).vertex=!0,e.value=mxUtils.createXmlDocument().createElement("object"),e.setAttribute("label","config"),e.setAttribute("type","awssfAWSconfig"),e.setAttribute("accessKeyId",""),e.setAttribute("secretAccessKey",""),e.setAttribute("region",""),e.awssf=t,e;var t,e},it.prototype.handler=tt,Q(it);const st=function(){};st.prototype.type="Choice",st.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"shape=stencil(rZZNT4QwEIZ/DddNodmgR8Pi0YsHzl12VpqFlrS46r+3UIl8FNOhJhzgHWaezvBSiGimK9ZClBDBGojoKUqSE5RccynMqdGZbqHsbOTOFGfnGmxEd0re4INfusqGuahA8a6P0jwiT+ae/qBZKYUwRUxNPYtM4qYY48Lkkk9bjBzio+V8/Qj2qjWIBjpQM/V39S9FMUjPCBIl+0ho0L6O0Jh0Xz85GvSwr6EcT1qYIfYjvYabwZsUaAZfTqgZfDnBZvAG4UkkXfjukBz9aAX6ZVqAfDn/0FPqy8J74jHZO8AcO8B43wDxplj35DvA3DVAmhll68NFszMrb29KvouLc4kt6z+Kq8AYbuQdJiNy7aKu1sf0motJunMT9k+Pydzjx0D+WA+xgtAC6AbKWmrYspfRV49vUDeeOc2uUsEfZrjyurY/S06TrbIH1f6XDcI3);whiteSpace=wrap;html=1;gradientColor=none;dashed=1",e);return r.setAttribute("choices",""),r.setAttribute("default",""),r},st.prototype.hiddenAttributes=["choices","default"],st.prototype.createDefaultEdge=function(){return ChoiceEdge.prototype.create()},st.prototype.validate=function(t,e){return e||(e=[]),t.edges&&0!=t.edges.filter((function(e){return e.source==t&&b(e)})).length||e.push("A Choice state MUST have more than one choice edge"),E(t,e,!1)},st.prototype.expJSON=function(t,e){var r={},n=t.getAttribute("label");if(r[n]={Type:"Choice",Choices:[]},t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path"))),t.edges){var a=t.edges.sort((function(t,e){return Number(t.getAttribute("weight"))>Number(e.getAttribute("weight"))?-1:Number(t.getAttribute("weight"))<Number(e.getAttribute("weight"))?1:0}));for(var o in a){var i=a[o];i.source==t&&(b(i)?r[n].Choices.push(i.awssf.expJSON(i,e)):y(i)&&Object.assign(r[n],i.awssf.expJSON(i,e)))}}return r},Q(st);var ut=function(t){this.custom=function(){this.domNode.appendChild(ChoiceEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(DefaultEdge.prototype.createHandlerImage.apply(this,arguments))},tt.apply(this,arguments)};st.prototype.handler=ut,mxUtils.extend(ut,tt);const lt=function(){};lt.prototype.type="StartAt",lt.prototype.create=function(t,e,r){return null==t&&(t=this.type),at(this,t,"endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;",e,r)},lt.prototype.validate=function(t,e){return e||(e=[]),t.source&&t.target||e.push("edge MUST be connected"),e},lt.prototype.expJSON=function(t,e){return null!=t.target?{StartAt:e[t.target.id].getAttribute("label")}:{}},lt.prototype.handler=et,Q(lt);const ct=function(){};ct.prototype.type="Next",ct.prototype.create=function(t,e,r){return null==t&&(t=this.type),at(this,t,"endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;",e,r)},ct.prototype.validate=function(t,e){return e||(e=[]),t.source&&t.target||e.push("edge MUST be connected"),e},ct.prototype.expJSON=function(t,e){return null!=t.target?{Next:e[t.target.id].getAttribute("label")}:{}},ct.prototype.createHandlerImage=function(){return v.call(this,ct,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAB30lEQVRIS72VsU4CQRRFj52ddCZU0tpo4h/YYKkUNhRCYgyJhfIFakNjoR9goiiJiY12kBBsaSDRL9A/EBtojJjLZNhlnIVdjU612Z097819d96bGw6HQ/5ozcWBv77C8zM8PcHqKqyswNLS7Iwi4b0elMvw8AB6dlcqBZubcHYGevYtL1zAYtEP9QW5vDSB3PUNXihAtTr7yO6OgwM4P598OwFXxltbycH2j/v7yROM4dI1kwmkWF+H62v4/ASd5vExCHpxAdvbsL8PNzfBe2n/8hLUYAx35bDwdBqaTchmZ8O1Y2cHrq7M3jFcUd/fA4CFDwagAKencHxsvkdlrm/ivL2F4PKxJAkvC2+1YG0NFhZgbw/q9elwMSSN7sEoc18hLbzRgG4XKhXodCCXM972ae4WdgTXcU9O/JkLvrsLtZpxkuy2uDgdfnRkJIyVueDLy3B3Z+Rpt2Fj47tbvJlP09xmrh9LJSPPxwfMz0fDJzS3Vfa5JQzXPt3efB76fT9cJ7O9aKbPXbjkub017nIvUaTPFU32CWeftBEoa0lsu+T/9Bab5U+7orVf+LSR/VxB4kgkKdRLYvVzG1k1ODw0k8gXRFABdakSTSK3kCqS5qedoZqjv5qhSZ3i2/8FknYly43Hp8kAAAAASUVORK5CYII=")},ct.prototype.handler=et,Q(ct);const pt=function(){};pt.prototype.type="Retry",pt.prototype.create=function(t,e,r,n){null==t&&(t=this.type),r||(r={ErrorEquals:"",InterValSeconds:1,MaxAttempts:3,BackoffRate:2});var a=at(this,t,"edgeStyle=orthogonalEdgeStyle;curved=1;html=1;exitX=0.5;exitY=1;entryX=1;entryY=0.5;startArrow=none;startFill=0;jettySize=auto;orthogonalLoop=1;strokeColor=#000000;strokeWidth=1;fontSize=12;",e,e);return a.geometry.setTerminalPoint(new mxPoint(0,a.geometry.height),!0),a.geometry.setTerminalPoint(new mxPoint(a.geometry.width,0),!1),a.setAttribute("placeholders",1),a.setAttribute("error_equals",r.ErrorEquals||""),a.setAttribute("interval_seconds",r.IntervalSeconds||""),a.setAttribute("max_attempts",r.MaxAttempts||""),a.setAttribute("backoff_rate",r.BackoffRate||""),a.setAttribute("weight",n||1),a},pt.prototype.validate=function(t,e){return e||(e=[]),t.source&&t.target||e.push("edge MUST be connected"),t.source&&t.target&&t.source.id!=t.target.id&&e.push("retry edge target MUST be self"),0==x(t.getAttribute("interval_seconds"))&&e.push("interval_seconds MUST be a positive integer"),0==x(t.getAttribute("max_attempts"))&&e.push("max_attempts MUST be greater than or equal to 0"),0==x(t.getAttribute("backoff_rate"))&&Number(t.getAttribute("backoff_rate"))>=1&&e.push("backoff_rate MUST be greater than or equal to 1.0"),e},pt.prototype.expJSON=function(t,e){var r=t.getAttribute("error_equals");return r=r?r.split(/,\s*/):[],null!=t.target?{ErrorEquals:r,IntervalSeconds:Number(t.getAttribute("interval_seconds")),MaxAttempts:Number(t.getAttribute("max_attempts")),BackoffRate:Number(t.getAttribute("backoff_rate"))}:{}},pt.prototype.createHandlerImage=function(){return v.call(this,pt,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACCUlEQVRIS7WVTUhUURTHf7NRN+JsUkER3UUI5kJMIoqBMNzkR6C7Elq5UReh0sIkgsCF0yJw5wdi2MYPEAyxLAhcuNBcFKLM4EJ0oU5I+FF648zzNe++d5/MM72rx7vn/M///s9XSCmlOO/EE7C8DUtbcDMfyvKgOHyui30ZMoInDqH9A0z8APl2n3AW1F6HvmqQb5/jBRfA5kkzqCnIwEMrkOHo4E8mYGg5rSdrRq2VEH3g8UuBC+O6seDAtsd4o+cFFrjoWvImJUWkBIbroCBbD3aiYH0XXn6BkW/6nWgfa9VyYIG75bDBZ9bg6VQKpKUCnt+BnQN49B5Wd/QAj8tgsPbfPws8/Bp+HqUM/cDFQpwlgS3TMLriZb/X4QCP7amkJM5zUXDBEGnO+iCkxr8rTyJN4NkZ0FwOHbdhcx8iQ7B/7C0AR2JDqvuTouezmbk7oX9OrU59NgvzcXNldd+FF/eSd+kxv1UIvfehNBeiC3jIOMNozNPV/MY1eNcARTnQNQf9i2bmmuZBqqWpFN7WwK/fJMv3Y0wPkJMJiU5XKaZb5+L2KgLtVfB1A+rH9KQa61w6tDiq13rQQSCs422GDhWgK5stNsuLTkVH+TkfbJ7nEsQ5DvwkEinscWCw8d9EbTOWVKYgAirzRWZ4oE3kZiA7VLrS3qGyR/9rhwatFB97syyXBP4Xec8Ry9TpbfEAAAAASUVORK5CYII=")},pt.prototype.handler=et,Q(pt);const dt=function(){};dt.prototype.type="Catch",dt.prototype.create=function(t,e,r,n,a){null==t&&(t=this.type),n||(n={});var o=at(this,t,"endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;",e,r);return o.setAttribute("placeholders",1),o.setAttribute("error_equals",n.ErrorEquals||""),o.setAttribute("result_path",n.ResultPath||""),o.setAttribute("weight",a||"1"),o},dt.prototype.validate=function(t,e){return e||(e=[]),t.source&&t.target||e.push("edge MUST be connected"),0==S(t.getAttribute("result_path"))&&e.push("result_path MUST use only supported jsonpath"),e},dt.prototype.expJSON=function(t,e){var r=t.getAttribute("error_equals");return r=r?r.split(/,\s*/):[],null!=t.target?{ErrorEquals:r,Next:e[t.target.id].getAttribute("label")}:{}},dt.prototype.createHandlerImage=function(){return v.call(this,dt,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACFklEQVRIS7WVT0hUURTGf5NRbsRZBLlImHZKwRREM2Cg48YWoRNE2SIq3BSloxudTToqkUXguBSCDEFsETMtRmqlxSi2CLIg3ESDDEOhlOJmimDi+Ob5/t2Z8RXe1Xv3nfed737nu+d4CoVCgX1anj2Bb2bg+wp8+wB1p+CoH7y+ipRKg+c34XUfrCZBnu2r2gsNYWgbB3lWLDW4AL68qQZVJel4qiWyLSd48gasPKt4ZEdAIALn45ZtK7gwfn7RPbD+x5WE5QQGuOg6cdwpxekuCEbgSCMcOAh/8rCWhvl7kF22EhHtI193a2CAq+Rova8BZ9/B21HIvdfeRYLtHLy4CuufrQn81yE8tbNngI954deWEXgsCJdm4ccXmA3D723jW2gEznbDchzeDDvZD/w0gYuPRRLzah6EYB+kH8DiI3d1EGm8viJzVSHbn8CJy5C6Ax+n3YEXC6vJshBzHu/CJJzshLm77sGbh6AlVoZ5Uz80DcDiQ6csh2rgXBQ2VtWJLcxVmpcraKAHQqPwaQZSt52SWTSXz3a3yJ7ZikuPNX/rVpR7kbjm9PrhWohqvai8zyVCpDlzC2rrwVNV/hJJvNLnwiTus3rdnUdAWPdmFDdUgPatt+gs/7UrFu1nPmzpfi5JzO2glEQihfSSPfVzHURq8KpXk0qVREAFUHq4q0lkZyn3QOanPkNljv7XDHXrFEX8X1YGE8t/bBUwAAAAAElFTkSuQmCC")},dt.prototype.handler=et,Q(dt);const ht=function(){};ht.prototype.type="Choice",ht.prototype.create=function(t,e,r,n,a){null==t&&(t=this.type),n||(n={});var o=at(this,t,"endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;",e,r);return o.setAttribute("placeholders",1),o.setAttribute("condition",function t(e){var r=e.Variable,n={And:"&&",Or:"||",Equals:"==",GreaterThan:">",GreaterThanEquals:">=",LessThan:"<",LessThanEquals:"<="};for(var a in e){var o=e[a];if(a.match(/^(And|Or)$/))return o.map(e=>"("+t(e)+")").join(" "+n[a]+" ");if(a.match(/^(Not)$/))return"!("+t(o)+")";{const t=a.match(/^(Boolean|Numeric|String|Timestamp)(Equals|GreaterThan|GreaterThanEquals|LessThan|LessThanEquals)$/);if(t)return t[1].match(/(String|Timestamp)/i)?[r,n[t[2]],'"'+o+'"'].join(" "):[r,n[t[2]],o].join(" ")}}}(n)||"$.foo == 1"),o.setAttribute("weight",a||"1"),o},ht.prototype.validate=function(t,e){e||(e=[]),t.source&&t.target||e.push("edge MUST be connected");var r=t.getAttribute("condition");if(r)try{jsep(r)}catch(t){e.push("invalid jsep.")}else e.push("condition MUST be defined");return e},ht.prototype.expJSON=function(t,e){if(null!=t.target){var r,n=t.getAttribute("condition");if(null!=n)r=T(jsep(n));return r.Next=e[t.target.id].getAttribute("label"),r}return{}},ht.prototype.createHandlerImage=function(){return v.call(this,ht,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAACWUlEQVRIS7WVXW/SUBjH/12AGZDSDkkwQ40mytCxmC1z6Fx82RUXiiYz8WvMO/0AXrqPoYkandF4t+iWuSXTRMkcu1OUKbFAAWFCy1ZzaoCe9oDUl3PV5pzzO8/L/3keTtM0DV1WsdpAVlaRLSoICi4ERScEj6PbldYex4LX1F08fyNjM7MN8m1ee5x9GAq5ER8TQb47LQs8ldnG49U8E8p65ErMj0jIzeRT8EerObz9UO3JZeOhWNiL+OiA5V4LTiy+tyTZBjcvXJ8KWDzQ4SSuc/NbllCMHtmLWJhHwOdEHwc0djSkpToWkkVk8nXKEBL72cQglQMdzgrH9Iiggwnk5XoJXwp1/f90mMf3Hzu4vyxBKqvUAycPe3A1to9Wy+0Hn1BX24oM+ftxbTKAQkXF3cVvUBrtvYtRARNhL1Y2y3ixXrJYf3PmQBsuV1Rt7skWdejcsA9nhngsvi9hOVW2lYfZy4OtOuA2Plc1cyITp/w4cciDZ2t5vPtoTz3GxHILSVkzu3dp3I8ogb+2Dz8/7MOFqKB7y7R8MsJj6rgPSxvWsLgcnL6XK6tMryjLWTHvltCJY15Mj4hIpit4ulaw5IOKOZGiWS3khlGKr1JlpKVaS4o1ZRcPV3IWrfc7OdyaOUhLsVPZn43wGD/qBe92/LaICJGpc1Khd+YzlNZt6Q8AsfpGImStUAL6b72laeWfdkWj/IweM/s5ecTYDjqFiISC9JKe+nkT8msSFfRQsR4hUAKMjw3Ym0RmK8kM/SoryMoKgqIL+0XX381Qu0rpeYb+KzDh/AQ2ZmDL5ziOTgAAAABJRU5ErkJggg==")},ht.prototype.handler=et,Q(ht);const mt=function(){};mt.prototype.type="Default",mt.prototype.create=function(t,e,r){return null==t&&(t=this.type),at(this,t,"endArrow=classic;html=1;strokeColor=#000000;strokeWidth=1;fontSize=12;",e,r)},mt.prototype.validate=function(t,e){return e||(e=[]),t.source&&t.target||e.push("edge MUST be connected"),e},mt.prototype.expJSON=function(t,e){return null!=t.target?{Default:e[t.target.id].getAttribute("label")}:{}},mt.prototype.createHandlerImage=function(){return v.call(this,mt,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAYCAYAAAARfGZ1AAABsklEQVRIS9WVO0sDQRDH/9ek0YAQsEgQFCRpxCaKmuoOQRtN7aOxEVtBP0B8gCARrESwsdI+WoggHkGDoH6ABPGJdhYaEY3Fyma53L5yXoIRHLjmduY3s/PYMQghBB5SfAKeC+wLRdkXDHtZuGeGDl4qArk14NYGSm8qKNAMtJtAYg4IBKs7UuAUaKf0UBlDnZgp5kgnApxCC/v+rsxrdY0BiXnVrgKnER9qFPy6GkqrNyjDaY53Rt1UhHsAaxFoauXQBPgsAndZ4HQV+HoX3dIUTeyJNSjD5XQ48IcckF1mkJYOoHsS6BwGro9YXWSJjrAaOFKGb5tiAXVwx8BaAtoGgFwauDpQo5+yOfjrIyG7SVHJCx5LAv2zQD4DnK2r0Y9n3Dkwbo4JkQvpBfc6o674whoXm4RcbvmPPNIHWAvA/YlbD946Pg3EZ9ifmiP/KS1C5LXmfHAFiPSyqOlsyCLk3G+3+GlF2utCt3j1uTxEHy+s/c431CGiN9D2uTyhfkee16s6oVSpYW+LE0G9ryLffvxt/u49d7w2bBPJxazs0DwQiv3CDq2nW3Q22gX9L+Df4kMPyOkzB4MAAAAASUVORK5CYII=")},mt.prototype.handler=et,Q(mt);const gt=function(){};gt.prototype.type="Fail",gt.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"shape=mxgraph.flowchart.terminator;html=1;whiteSpace=wrap;gradientColor=none;",e);return r.setAttribute("error",e.Error||""),r.setAttribute("cause",e.Cause||""),r.value.removeAttribute("input_path"),r.value.removeAttribute("output_path"),r},gt.prototype.validate=function(t,e){return e||(e=[]),t.edges&&t.edges.filter((function(e){return e.source==t&&o(e)})).length>0&&e.push("A Fail state MUST have no outgoing edge"),t.getAttribute("error")||e.push("error MUST have a value"),t.getAttribute("cause")||e.push("cause MUST have a value"),E(t,e,!1)},gt.prototype.expJSON=function(t,e){var r={},n=t.getAttribute("label");return r[n]={Type:"Fail",Error:t.getAttribute("error"),Cause:t.getAttribute("cause")},t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),r},Q(gt),gt.prototype.handler=tt;const ft=function(){};ft.prototype.type="Parallel",ft.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"swimlane;whiteSpace=wrap;html=1;dashed=1;gradientColor=none",e),n=r.getGeometry();r.setGeometry(new mxGeometry(n.x,n.y,480,200)),r.setAttribute("branches","");var a=StartPoint.prototype.create(new mxGeometry((r.geometry.width-30)/2,40,30,30));if(r.insert(a),0===Object.keys(e).length){var o=TaskState.prototype.create();o.setGeometry(new mxGeometry(80,80,o.geometry.width,o.geometry.height)),r.insert(o);var i=StartAtEdge.prototype.create("StartAt",a,o);r.insert(i);var s=TaskState.prototype.create();s.setGeometry(new mxGeometry(320,80,s.geometry.width,s.geometry.height)),r.insert(s);var u=StartAtEdge.prototype.create("StartAt",a,s);r.insert(u)}return r},ft.prototype.hiddenAttributes=["branches"],ft.prototype.createDefaultEdge=function(t){for(var e in t.edges){var r=t.edges[e];if(r.source==t&&m(r))return CatchEdge.prototype.create()}return NextEdge.prototype.create()},ft.prototype.validate=function(t,e){return e||(e=[]),0==w(t.getAttribute("parameters"))&&e.push("parameters MUST be valid JSON"),E(t,e,!0)},ft.prototype.expJSON=function(t,e){const r={},n=t.getAttribute("label");r[n]={Type:"Parallel",Branches:[]},t.getAttribute("parameters")&&(r[n].Parameters=JSON.parse(t.getAttribute("parameters"))),t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path"))),t.getAttribute("result_path")&&(r[n].ResultPath=M(t.getAttribute("result_path")));const a=[];for(const r of t.children)if(s(r))for(const t of r.edges)t.target!=r&&g(t)&&a.push(e[t.target.id]);function i(t,r){for(var n in r.push(t),t.edges){var a=t.edges[n];a.target!=t&&i(e[a.target.id],r)}return r}for(const l of a){const a=[];i(l,a);const c={};for(const r of a)if(null!=r.value&&"object"==typeof r.value&&o(r)&&!s(r)&&!u(t)&&r.isVertex()){if(p(r))continue;r.awssf&&r.awssf.expJSON&&Object.assign(c,r.awssf.expJSON(r,e))}r[n].Branches.push({StartAt:l.getAttribute("label"),States:c})}let l=!1;if(t.edges){const a=t.edges.sort((function(t,e){return Number(t.getAttribute("weight"))>Number(e.getAttribute("weight"))?-1:Number(t.getAttribute("weight"))<Number(e.getAttribute("weight"))?1:0}));for(const o of a)o.source==t&&o.awssf.expJSON&&(f(o)?(r[n].Retry||(r[n].Retry=[]),r[n].Retry.push(o.awssf.expJSON(o,e))):A(o)?(r[n].Catch||(r[n].Catch=[]),r[n].Catch.push(o.awssf.expJSON(o,e))):m(o)&&(l=!0,Object.assign(r[n],o.awssf.expJSON(o,e))))}return 0!=l&&"End"!=r[n].Next||(delete r[n].Next,r[n].End=!0),r},Q(ft);var At=function(t){this.custom=function(){this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(CatchEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(RetryEdge.prototype.createHandlerImage.apply(this,arguments))},tt.apply(this,arguments)};ft.prototype.handler=At,mxUtils.extend(At,tt);const bt=function(){};bt.prototype.type="Pass",bt.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"shape=mxgraph.flowchart.process;whiteSpace=wrap;gradientColor=none;html=1;",e);return r.setAttribute("parameters",JSON.stringify(e.Parameters)||""),r.value.setAttribute("result",e.Result||""),r.value.setAttribute("result_path",e.ResultPath||""),r},bt.prototype.createDefaultEdge=function(t){for(var e in t.edges){var r=t.edges[e];if(r.source==t&&m(r))return null}return NextEdge.prototype.create()},bt.prototype.validate=function(t,e){return e||(e=[]),0==w(t.getAttribute("parameters"))&&e.push("parameters MUST be valid JSON"),E(t,e,!0)},bt.prototype.expJSON=function(t,e){var r={},n=t.getAttribute("label");r[n]={Type:"Pass"},t.getAttribute("parameters")&&(r[n].Parameters=JSON.parse(t.getAttribute("parameters"))),t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path"))),t.getAttribute("result_path")&&(r[n].ResultPath=M(t.getAttribute("result_path"))),t.getAttribute("result")&&(r[n].Result=t.getAttribute("result"));var a=!1;for(var o in t.edges){var i=t.edges[o];i.source==t&&(m(i)&&(a=!0,Object.assign(r[n],i.awssf.expJSON(i,e))))}return 0!=a&&"End"!=r[n].Next||(delete r[n].Next,r[n].End=!0),r},Q(bt);var yt=function(t){this.custom=function(){this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this,arguments))},tt.apply(this,arguments)};bt.prototype.handler=yt,mxUtils.extend(yt,tt);const vt=function(){};vt.prototype.type="Start",vt.prototype.create=function(t){return nt(this,t)},vt.prototype.createDefaultEdge=function(){return StartAtEdge.prototype.create()};const xt=function(){};xt.prototype.type="End",xt.prototype.create=function(){return nt(this)};const wt=function(){};wt.prototype.type="Succeed",wt.prototype.create=function(t,e){e||(e={});return rt(this,t,"shape=mxgraph.flowchart.terminator;html=1;whiteSpace=wrap;gradientColor=none;",e)},wt.prototype.validate=function(t,e){return e||(e=[]),t.edges&&t.edges.filter((function(e){return e.source==t&&o(e)})).length>0&&e.push("A Succeed state MUST have no outgoing edge"),E(t,e,!1)},wt.prototype.expJSON=function(t,e){var r={},n=t.getAttribute("label");return r[n]={Type:"Succeed"},t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path"))),r},Q(wt),wt.prototype.handler=tt;const St=function(){};St.prototype.type="Task",St.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"shape=stencil(rZVNb4MwDIZ/DdcqkI2P48S6Y1Wph51TMCMqTVDC2m2/fiEBdUCyAavExa+xH78BjIdTWZIavAAxcgYPP3tBsBeQQ0EZ5EreC56BlEpWQWluCJEJryZMYhMSWUPWGO1CBCXHCkxGNoKf4ErzputAWQmCNm0Wbz30pO5pL5xmnDHVhHImB5kfedWMUKZq0YdphjaPBvPZxSaqFeEMDYiBerO508LLaow/D3NYihl66aF/YV4XYvx1mO3iQ0PBiIT8mazdUk8WWBLPhB2Ww/r3foWz5cc4gc13ZoPhVCmujw2nR5Kd3gR/Z7l1RJ0R7cfuem2tC2K0PojIJP3qpgw3kR+FcYSihzhIEuy7hnaMhtOCC/hl5oJWldlDroOvSbueJok+feYXuPmNLH5tbfvqSu1TV3XoLteWHYOp3X0/P4n/L0Oj8js70jWT56tV8/vSwjc=);whiteSpace=wrap;gradientColor=none;html=1;",e);return r.setAttribute("resource",e.Resource||""),r.setAttribute("timeout_seconds",e.TimeoutSeconds||60),r.setAttribute("heartbeat_seconds",e.HeartbeatSeconds||""),r},St.prototype.createDefaultEdge=function(t){for(var e in t.edges){var r=t.edges[e];if(r.source==t&&m(r))return CatchEdge.prototype.create()}return NextEdge.prototype.create()},St.prototype.validate=function(t,e){return e||(e=[]),t.getAttribute("resource")&&t.getAttribute("resource").match(/^arn:[^:]+:(states|lambda):[^:]*:[^:]*:[^:]+:.+/)||e.push("resource MUST be a URI that uniquely identifies the specific task to execute"),0==w(t.getAttribute("parameters"))&&e.push("parameters MUST be valid JSON"),0==x(t.getAttribute("timeout_seconds"))&&e.push("timeout_seconds MUST be number"),0==x(t.getAttribute("heartbeat_seconds"))?e.push("heartbeat_seconds MUST be number"):Number(t.getAttribute("heartbeat_seconds"))>=Number(t.getAttribute("timeout_seconds"))&&e.push("heartbeat_seconds MUST be smaller than timeout_seconds"),E(t,e,!0)},St.prototype.expJSON=function(t,e){var r={},n=t.getAttribute("label");if(r[n]={Type:"Task",Resource:t.getAttribute("resource")},t.getAttribute("parameters")){var a=t.getAttribute("parameters");a&&("{"===a[0]?"{}"!==a&&(r[n].Parameters=JSON.parse(a)):r[n].Parameters=a)}t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path"))),t.getAttribute("result_path")&&(r[n].ResultPath=M(t.getAttribute("result_path"))),t.getAttribute("timeout_seconds")&&(r[n].TimeoutSeconds=Number(t.getAttribute("timeout_seconds"))),t.getAttribute("heartbeat_seconds")&&(r[n].HeartbeatSeconds=Number(t.getAttribute("heartbeat_seconds")));var o=!1;if(t.edges){var i=t.edges.sort((function(t,e){return Number(t.getAttribute("weight"))>Number(e.getAttribute("weight"))?-1:Number(t.getAttribute("weight"))<Number(e.getAttribute("weight"))?1:0}));for(var s in i){var u=i[s];u.source==t&&(u.awssf&&u.awssf.expJSON&&(f(u)?(r[n].Retry||(r[n].Retry=[]),r[n].Retry.push(u.awssf.expJSON(u,e))):A(u)?(r[n].Catch||(r[n].Catch=[]),r[n].Catch.push(u.awssf.expJSON(u,e))):m(u)&&(o=!0,Object.assign(r[n],u.awssf.expJSON(u,e)))))}}return 0!=o&&"End"!=r[n].Next||(delete r[n].Next,r[n].End=!0),r},Q(St);var Et=function(t){this.custom=function(){this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(CatchEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(RetryEdge.prototype.createHandlerImage.apply(this,arguments))},tt.apply(this,arguments)};St.prototype.handler=Et,mxUtils.extend(Et,tt);const Ct=function(){};Ct.prototype.type="Wait",Ct.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"shape=mxgraph.flowchart.delay;whiteSpace=wrap;gradientColor=none;html=1;",e),n=!1,a=Ct.prototype.cst.DURATION_FORMAT;for(var o in a){var i=C(a[o]);e[a[o]]?(r.setAttribute(i,e[a[o]]),n=!0):r.value.removeAttribute(i)}return n||r.setAttribute("seconds",""),r},Ct.prototype.createDefaultEdge=function(t){for(var e in t.edges){var r=t.edges[e];if(r.source==t&&m(r))return null}return NextEdge.prototype.create()},Ct.prototype.cst={DURATION_FORMAT:["Seconds","SecondsPath","Timestamp","TimestampPath"]},Ct.prototype.validate=function(t,e){var r;return e||(e=[]),0==x(t.getAttribute("seconds"))&&e.push("seconds MUST be number"),0==((r=t.getAttribute("timestamp"))?!!r.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(Z|[+-]\d{2}:\d{2})$/):null)&&e.push("timestamp MUST be valid formated"),0==S(t.getAttribute("seconds_path"))&&e.push("second_path MUST use only supported jsonpath"),0==S(t.getAttribute("timestamp_path"))&&e.push("timestamp_path MUST use only supported jsonpath"),t.getAttribute("seconds")||t.getAttribute("timestamp")||t.getAttribute("seconds_path")||t.getAttribute("timestamp_path")||e.push("A Wait state MUST contain exactly one of Seconds, SecondsPath, Timestamp, or TimestampPath"),E(t,e,!1)},Ct.prototype.expJSON=function(t,e){var r={},n=t.getAttribute("label");r[n]={Type:"Wait"},t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path")));var a=this.cst.DURATION_FORMAT;for(var o in a){var i=C(a[o]);if(t.getAttribute(i)){t.getAttribute(i).match(/^\d+/)?r[n][a[o]]=Number(t.getAttribute(i)):r[n][a[o]]=t.getAttribute(i);break}}var s=!1;for(var u in t.edges){var l=t.edges[u];l.source==t&&(m(l)&&(s=!0,Object.assign(r[n],l.awssf.expJSON(l,e))))}return 0!=s&&"End"!=r[n].Next||(delete r[n].Next,r[n].End=!0),r},Ct.prototype.buildForm=function(t,e,r){if(-1==["label","comment","input_path","output_path"].indexOf(e)){var n=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("select"),i=this.cst.DURATION_FORMAT;for(var s in i){var u=document.createElement("option");mxUtils.writeln(u,i[s]),u.setAttribute("value",C(i[s])),e==C(i[s])&&u.setAttribute("selected","true"),o.appendChild(u)}a.appendChild(o),n.appendChild(a),a=document.createElement("td");const l=document.createElement("textarea");return l.setAttribute("rows","2"),l.style.width="100%",l.value=r,a.appendChild(l),n.appendChild(a),t.body.appendChild(n),[o,l]}if("placeholders"!=e){const n=t.addTextarea(e+":",r,2);return n.style.width="100%",[e,n]}return null},Ct.prototype.applyForm=function(t,e,r){var n=!1;if(null==r)t.removeAttribute(e);else{if("object"==typeof e)for(var a in this.cst.DURATION_FORMAT){var o=C(this.cst.DURATION_FORMAT[a]);o==e.value?t.setAttribute(e.value,r.value):t.removeAttribute(o)}else t.setAttribute(e,r.value);n=n||"placeholder"==e&&"1"==t.getAttribute("placeholders")}return n},Q(Ct);var Nt=function(t){this.custom=function(){this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this,arguments))},tt.apply(this,arguments)};Ct.prototype.handler=Nt,mxUtils.extend(Nt,tt);const Tt=function(){};Tt.prototype.type="Map",Tt.prototype.create=function(t,e){e||(e={});var r=rt(this,t,"swimlane;whiteSpace=wrap;html=1;dashed=1;gradientColor=none;shape=awssf.layered;dx=10;container=1;recursiveResize=0",e),n=r.getGeometry();r.setGeometry(new mxGeometry(n.x,n.y,300,200)),r.setAttribute("items_path",e.ItemsPath||""),r.setAttribute("max_concurrency",e.MaxConcurrency||""),r.setAttribute("iterator","");var a=StartPoint.prototype.create(new mxGeometry((r.geometry.width-30)/2,40,30,30));return r.insert(a),r},Tt.prototype.hiddenAttributes=["iterator"],Tt.prototype.createDefaultEdge=function(t){for(var e in t.edges){var r=t.edges[e];if(r.source==t&&m(r))return CatchEdge.prototype.create()}return NextEdge.prototype.create()},Tt.prototype.validate=function(t,e){return e||(e=[]),0==w(t.getAttribute("parameters"))&&e.push("parameters MUST be valid JSON"),E(t,e,!0)},Tt.prototype.expJSON=function(t,e){const r={},n=t.getAttribute("label");let a;r[n]={Type:"Map",Iterator:{}},t.getAttribute("parameters")&&(r[n].Parameters=JSON.parse(t.getAttribute("parameters"))),t.getAttribute("comment")&&(r[n].Comment=t.getAttribute("comment")),t.getAttribute("input_path")&&(r[n].InputPath=M(t.getAttribute("input_path"))),t.getAttribute("output_path")&&(r[n].OutputPath=M(t.getAttribute("output_path"))),t.getAttribute("result_path")&&(r[n].ResultPath=M(t.getAttribute("result_path"))),t.getAttribute("items_path")&&(r[n].ItemsPath=M(t.getAttribute("items_path"))),t.getAttribute("max_concurrency")&&(r[n].MaxConcurrency=t.getAttribute("max_concurrency"));for(const r in t.children){const n=t.children[r];if(s(n))for(const t in n.edges){const r=n.edges[t];r.target!=n&&(g(r)&&(a=e[r.target.id]))}}const i=[];!function t(r,n){n.push(r);for(const a in r.edges){const o=r.edges[a];o.target!=r&&t(e[o.target.id],n)}return n}(a,i);const l={};for(const r of i)if(null!=r.value&&"object"==typeof r.value&&o(r)&&!s(r)&&!u(t)&&r.isVertex()){if(d(r))continue;r.awssf&&r.awssf.expJSON&&Object.assign(l,r.awssf.expJSON(r,e))}r[n].Iterator={StartAt:a.getAttribute("label"),States:l};let c=!1;if(t.edges){var p=t.edges.sort((function(t,e){return Number(t.getAttribute("weight"))>Number(e.getAttribute("weight"))?-1:Number(t.getAttribute("weight"))<Number(e.getAttribute("weight"))?1:0}));for(const a in p){const o=p[a];o.source==t&&(o.awssf.expJSON&&(f(o)?(r[n].Retry||(r[n].Retry=[]),r[n].Retry.push(o.awssf.expJSON(o,e))):A(o)?(r[n].Catch||(r[n].Catch=[]),r[n].Catch.push(o.awssf.expJSON(o,e))):m(o)&&(c=!0,Object.assign(r[n],o.awssf.expJSON(o,e)))))}}return 0!=c&&"End"!=r[n].Next||(delete r[n].Next,r[n].End=!0),r},Q(Tt);var Mt=function(t){this.custom=function(){this.domNode.appendChild(NextEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(CatchEdge.prototype.createHandlerImage.apply(this,arguments)),this.domNode.appendChild(RetryEdge.prototype.createHandlerImage.apply(this,arguments))},tt.apply(this,arguments)};function Ut(t){!function(t){Z=t,t.editor?t.editor.graph:t.graph}(t),window.AWSconfig=it,window.ChoiceState=st,window.FailState=gt,window.ParallelState=ft,window.MapState=Tt,window.PassState=bt,window.StartPoint=vt,window.EndPoint=xt,window.SucceedState=wt,window.TaskState=St,window.WaitState=Ct,window.StartAtEdge=lt,window.NextEdge=ct,window.RetryEdge=pt,window.CatchEdge=dt,window.ChoiceEdge=ht,window.DefaultEdge=mt}Tt.prototype.handler=Mt,mxUtils.extend(Mt,tt);var Rt,Ot;r(0);mxscript("https://cdn.jsdelivr.net/npm/jsep@0.3.4/build/jsep.min.js"),mxscript("https://cdn.jsdelivr.net/npm/js-yaml@3.13.1/dist/js-yaml.min.js"),mxscript("https://sdk.amazonaws.com/js/aws-sdk-2.510.0.min.js"),mxscript("https://cdn.jsdelivr.net/npm/jsoneditor@7.0.4/dist/jsoneditor.min.js"),Rt="https://cdn.jsdelivr.net/npm/jsoneditor@7.0.4/dist/jsoneditor.min.css",(Ot=document.createElement("link")).setAttribute("rel","stylesheet"),Ot.setAttribute("href",Rt),document.getElementsByTagName("head")[0].appendChild(Ot),Draw.loadPlugin((function(t){n=t,function(){const t=EditDataDialog;EditDataDialog=function(e,r){if(!o(r))return t.apply(this,arguments);var n=document.createElement("div"),a=e.editor?e.editor.graph:e.graph;n.style.height="100%",n.style.overflow="auto";var i=a.getModel().getValue(r);if(!mxUtils.isNode(i)){var s=mxUtils.createXmlDocument().createElement("object");s.setAttribute("label",i||""),i=s}var u=new mxForm("properties");u.table.style.width="100%",u.table.style.paddingRight="20px";var l=document.createElement("colgroup");l.width="120",u.table.insertBefore(l,u.body);var c=document.createElement("colgroup");u.table.insertBefore(c,u.body);for(var p=i.attributes,d=[],h=[],m=0,g=function(t,e,r){return d[t]=e,h[t]=u.addTextarea(d[m]+":",r,2),h[t].style.width="100%",h[t]},y=function(t,e,r){return d[t]=e,h[t]=u.addText(d[m]+":",r),h[t].style.width="100%",h[t]},v=function(t,e,r){d[t]=e;const n=document.createElement("div");n.id="jsoneditor";const a={ed:new JSONEditor(n,{mode:"code",modes:["code","tree"],statusBar:!1,modalAnchor:n,popupAnchor:n}),set value(t){try{this.ed.set(JSON.parse(t))}catch(e){this.ed.set(t)}},get value(){return"object"==typeof this.ed.get()?JSON.stringify(this.ed.get()):this.ed.get()}};return a.value=r,h[t]=a,u.addField(d[m]+":",n)},x=0;x<p.length;x++){var w=p[x].nodeName,S=p[x].nodeValue;if(!(r.awssf.hiddenAttributes&&r.awssf.hiddenAttributes.indexOf(w)>=0))if("type"==w){var E=document.createElement("span");mxUtils.write(E,S),u.addField("type:",E)}else if("object"==typeof AWS&&"resource"==w){const t=y(m,w,S);m++,t.setAttribute("list","resources");const e=document.createElement("datalist");e.id="resources",P((function(t){for(var r in t){var n=document.createElement("option");n.value=t[r],e.appendChild(n)}})),n.appendChild(e)}else if("label"==w&&(b(r)||f(r)||A(r))){const t=y(m,w,S);m++,t.setAttribute("list","candidates");const e=document.createElement("datalist");e.id="candidates";var C=[];for(var N in p.error_equals&&C.push("%error_equals%"),p.condition&&C.push("%condition%"),C){var T=document.createElement("option");T.value=C[N],e.appendChild(T)}n.appendChild(e)}else if("error_equals"==w){const t=y(m,w,S);m++,t.setAttribute("list","errors");const e=document.createElement("datalist");e.id="errors";var M=["States.ALL","States.Timeout","States.TaskFailed","States.Permissions","States.ResultPathMatchFailure","States.ParameterPathFailure","States.BranchFailed","States.NoChoiceMatched"];for(const t of M){const r=document.createElement("option");r.value=t,e.appendChild(r)}n.appendChild(e)}else if(r.awssf&&r.awssf.buildForm){const t=r.awssf.buildForm(u,w,S);null!=t&&(d[m]=t[0],h[m]=t[1],m++)}else"parameters"==w?(v(m,w,S),m++):"placeholders"!=w&&(g(m,w,S),m++)}n.appendChild(u.table),this.init=function(){h.length>0&&h[0].focus()};var U=mxUtils.button(mxResources.get("cancel"),(function(){e.hideDialog.apply(e,arguments)}));U.className="geBtn";var R=mxUtils.button(mxResources.get("apply"),(function(){try{e.hideDialog.apply(e,arguments),i=i.cloneNode(!0);for(var t=!1,n=0;n<d.length;n++)r.awssf&&r.awssf.applyForm?t=t||r.awssf.applyForm(i,d[n],h[n]):null==h[n]?i.removeAttribute(d[n]):(i.setAttribute(d[n],h[n].value),t=t||"placeholder"==d[n]&&"1"==i.getAttribute("placeholders"));t&&i.removeAttribute("label"),a.getModel().setValue(r,i)}catch(t){mxUtils.alert(t)}}));R.className="geBtn gePrimaryBtn";var O=document.createElement("div");if(O.style.marginTop="18px",O.style.textAlign="right",a.getModel().isVertex(r)||a.getModel().isEdge(r)){var D=document.createElement("span");D.style.marginRight="10px";var _=document.createElement("input");if(_.setAttribute("type","checkbox"),_.style.marginRight="6px","1"==i.getAttribute("placeholders")&&(_.setAttribute("checked","checked"),_.defaultChecked=!0),mxEvent.addListener(_,"click",(function(){"1"==i.getAttribute("placeholders")?i.removeAttribute("placeholders"):i.setAttribute("placeholders","1")})),D.appendChild(_),mxUtils.write(D,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink){var k=document.createElement("a");k.setAttribute("href",EditDataDialog.placeholderHelpLink),k.setAttribute("title",mxResources.get("help")),k.setAttribute("target","_blank"),k.style.marginLeft="10px",k.style.cursor="help";var B=document.createElement("img");B.setAttribute("border","0"),B.setAttribute("valign","middle"),B.style.marginTop="-4px",B.setAttribute("src",Editor.helpImage),k.appendChild(B),D.appendChild(k)}O.appendChild(D)}e.editor&&e.editor.cancelFirst?(O.appendChild(U),O.appendChild(R)):(O.appendChild(R),O.appendChild(U)),n.appendChild(O),this.container=n}}(),Ut(t),function(t){const e=t.sidebar;e.addPalette("awsStepFunctions","AWS Step Functions",!0,(function(t){const r=[AWSconfig,StartPoint,EndPoint,TaskState,PassState,ChoiceState,WaitState,SucceedState,FailState,ParallelState,MapState];for(const n of r){const r=n.prototype.create();t.appendChild(e.createVertexTemplateFromCells([r],r.geometry.width,r.geometry.height,r.label))}}));const r=e.container;r.firstChild.click(),r.insertBefore(r.lastChild,r.firstChild),r.insertBefore(r.lastChild,r.firstChild)}(t),function(t){I=t,mxResources.parse("stepFunctions=StepFunctions"),mxResources.parse("awssfValidate=Validate"),mxResources.parse("awssfImport=Import..."),mxResources.parse("awssfImportBtn=Import"),mxResources.parse("awssfExportJSON=Export JSON"),mxResources.parse("awssfExportYAML=Export YAML"),mxResources.parse("awssfExport=Export"),mxResources.parse("awssfLambda=Lambda"),mxResources.parse("awssfDeploy=Deploy..."),mxResources.parse("awssfDeployBtn=Deploy"),t.actions.addAction("editData...",j,null,null,"Ctrl+M"),t.actions.addAction("awssfValidate",H),t.actions.addAction("awssfExportJSON",L),t.actions.addAction("awssfExportYAML",F),t.actions.addAction("awssfExport",W),t.actions.addAction("awssfImport",V),t.actions.addAction("awssfDeploy",Y).isEnabled=R;var e=t.menubar.addMenu("StepFunctions",(function(e,r){t.menus.addMenuItems(e,["-","awssfValidate","-","awssfImport","awssfExportJSON","awssfExportYAML","awssfExport","-","awssfDeploy"])}));e.parentNode.insertBefore(e,e.previousSibling.previousSibling.previousSibling)}(t),function(t){t.addListener("clientLoaded",(function(...e){console.log(">>reload scratchpad",...e),t.toggleScratchpad(),t.toggleScratchpad()}))}(t),K(t)}))}]);